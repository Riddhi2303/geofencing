<!DOCTYPE html>
<html>

<head>
  <title>Barrier Island Geofencing (Google Maps)</title>
  <style>
    #map {
      height: 500px;
      width: 100%;
      margin-bottom: 20px;
    }
  </style>
</head>

<body>

  <h2>Geofencing Check (Barrier Island)</h2>
  <div id="map"></div>

  <form id="checkForm">
    <label>Latitude: <input type="number" id="lat" step="any" required></label>
    <label>Longitude: <input type="number" id="lng" step="any" required></label>
    <button type="submit">Check Location</button>
  </form>

  <p id="result"></p>

  <!-- Google Maps JS API -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>

  <script>
    let map;
    let barrierPolygon;

    // Define coordinates of your barrier island polygon
    const polygonCoords = [
      { lat: 26.0970, lng: -80.1205 },
      { lat: 26.0948, lng: -80.1152 },
      { lat: 26.0897, lng: -80.1115 },
      { lat: 26.0862, lng: -80.1117 },
      { lat: 26.0823, lng: -80.1175 },
      { lat: 26.0856, lng: -80.1245 },
      { lat: 26.0908, lng: -80.1249 },
      { lat: 26.0951, lng: -80.1222 },
      { lat: 26.0970, lng: -80.1205 }
    ];

    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 26.090, lng: -80.117 },
        zoom: 15,
        mapTypeId: 'hybrid'  // Satellite with labels
      });

      // Draw polygon
      barrierPolygon = new google.maps.Polygon({
        paths: polygonCoords,
        strokeColor: '#FF0000',
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: '#FF0000',
        fillOpacity: 0.25
      });

      barrierPolygon.setMap(map);
    }

    // Load map
    window.onload = initMap;

    // Form submission
    document.getElementById('checkForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const lat = parseFloat(document.getElementById('lat').value);
      const lng = parseFloat(document.getElementById('lng').value);
      const point = new google.maps.LatLng(lat, lng);

      const isInside = google.maps.geometry.poly.containsLocation(point, barrierPolygon);
      document.getElementById('result').textContent = isInside
        ? '✅ YES – Inside Barrier Island'
        : '❌ NO – Outside Barrier Island';

      new google.maps.Marker({
        position: point,
        map,
        title: isInside ? 'Inside' : 'Outside'
      });
    });
  </script>

  <!-- Enable geometry library -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDn3xifGCb1LtD37fapsxJH2PuMd7v2vHw&libraries=geometry"></script>

</body>

</html>